{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/bryan/Desktop/my-representatives/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/bryan/Desktop/my-representatives/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/bryan/Desktop/my-representatives/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/bryan/Desktop/my-representatives/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/bryan/Desktop/my-representatives/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\bryan\\\\Desktop\\\\my-representatives\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from'react';import{useEffect,useState}from'react';import axios from'axios';import\"./styles/Votes.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Votes=/*#__PURE__*/function(_Component){_inherits(Votes,_Component);var _super=_createSuper(Votes);function Votes(props){var _this;_classCallCheck(this,Votes);_this=_super.call(this,props);_this.state={votes:null};return _this;}_createClass(Votes,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.state.votes==null){this.getVotes();}console.log(this.state.votes);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){}},{key:\"getVotes\",value:function(){var _getVotes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var memberID,payload,params,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:memberID=this.props.memberID;payload={'memberID':memberID};params=new URLSearchParams(payload);_context.next=5;return axios.get(\"https://my-representatives.herokuapp.com/backend/votes?\".concat(params));case 5:res=_context.sent;this.setState({votes:res.data.results[0].votes});case 7:case\"end\":return _context.stop();}}},_callee,this);}));function getVotes(){return _getVotes.apply(this,arguments);}return getVotes;}()},{key:\"getBillLink\",value:function getBillLink(element){var billID=element.split(\"-\");billID=billID[0];var x=billID.match(/[^\\d]+|\\d+/g);if(x[0]=='pn'){return'https://www.congress.gov/nomination/117th-congress/'+x[1];}else{return'https://www.govtrack.us/congress/bills/117/'+x[0]+x[1];}}},{key:\"getVoteStyle\",value:function getVoteStyle(vote){if(vote=='Yes'){return'bill-rep-position-yes';}else if(vote=='No'){return'bill-rep-position-no';}else{return'bill-rep-position';}}},{key:\"votes\",value:function votes(){var result=this.state.votes.reduce(function(r,a){r[a.date]=r[a.date]||[];r[a.date].push(a);return r;},Object.create(null));console.log('TEST!');console.log(result);var bills=[];for(var day in result){var billsOnDay=[];console.log(result[day]);for(var element in result[day]){element=result[day][element];billsOnDay.push(/*#__PURE__*/_jsxs(\"div\",{className:\"bill\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"date-row\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"first-row\",children:[/*#__PURE__*/_jsxs(\"a\",{className:\"bill-number\",href:this.getBillLink(element.bill.bill_id),target:\"_blank\",children:[element.bill.number,\":\"]}),element.bill.title?/*#__PURE__*/_jsxs(\"p\",{className:\"bill-title\",children:[\" \",element.bill.title]}):/*#__PURE__*/_jsxs(\"p\",{className:\"bill-title\",children:[\" \",element.description]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"second-row\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"bill-rep-name\",children:[this.props.name,\" voted \"]}),/*#__PURE__*/_jsxs(\"p\",{className:this.getVoteStyle(element.position),children:[element.position,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"bill-question\",children:[element.question,\": \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"third-row\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"bill-result\",children:[element.result,\", \"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"bill-total\",children:[element.total.no,\"-\",element.total.yes]})]})]}));}bills.push(/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"bill-date\",children:element.date})}),/*#__PURE__*/_jsx(\"div\",{className:\"bill-on-day\",children:billsOnDay})]}));}console.log(bills);return/*#__PURE__*/_jsx(\"div\",{className:\"bills\",children:bills});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"votes\",children:this.state.votes?this.votes():''});}}]);return Votes;}(Component);export{Votes as default};","map":{"version":3,"names":["React","Component","useEffect","useState","axios","Votes","props","state","votes","getVotes","console","log","memberID","payload","params","URLSearchParams","get","res","setState","data","results","element","billID","split","x","match","vote","result","reduce","r","a","date","push","Object","create","bills","day","billsOnDay","getBillLink","bill","bill_id","number","title","description","name","getVoteStyle","position","question","total","no","yes"],"sources":["C:/Users/bryan/Desktop/my-representatives/src/components/Votes.jsx"],"sourcesContent":["import React, {Component} from 'react'\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport \"./styles/Votes.css\";\r\nexport default class Votes extends Component \r\n{\r\n  constructor(props) \r\n    {\r\n        super(props);\r\n        this.state = \r\n        {\r\n          votes : null\r\n        }\r\n    }\r\n    componentDidMount() \r\n    {\r\n        if(this.state.votes == null)\r\n        {\r\n            this.getVotes();\r\n        }\r\n        console.log(this.state.votes)\r\n    }\r\n    componentDidUpdate() \r\n    {\r\n      \r\n    }\r\n\r\n    async getVotes()\r\n    {\r\n        const memberID = this.props.memberID\r\n        var payload = {'memberID' : memberID}\r\n       \r\n        const params = new URLSearchParams(payload);\r\n  \r\n        let res = await axios.get(\r\n          `https://my-representatives.herokuapp.com/backend/votes?${params}`)\r\n        \r\n        this.setState({votes : res.data.results[0].votes})\r\n    }\r\n\r\n    getBillLink(element)\r\n    {\r\n  \r\n      var billID = element.split(\"-\")\r\n      billID = billID[0]\r\n\r\n\r\n      var x = billID.match(/[^\\d]+|\\d+/g);\r\n      if(x[0] == 'pn')\r\n      {\r\n   \r\n  \r\n        return 'https://www.congress.gov/nomination/117th-congress/' + x[1];\r\n      }\r\n      else\r\n      {\r\n  \r\n       \r\n        return 'https://www.govtrack.us/congress/bills/117/' + x[0] + x[1];\r\n      }\r\n\r\n    }\r\n    \r\n    getVoteStyle(vote)\r\n    {\r\n      if(vote == 'Yes')\r\n      {\r\n        return 'bill-rep-position-yes'\r\n      }\r\n      else if(vote == 'No')\r\n      {\r\n        return 'bill-rep-position-no'\r\n      }\r\n      else\r\n      {\r\n        return 'bill-rep-position'\r\n      }\r\n    }\r\n    votes()\r\n    {\r\n        var result =  this.state.votes.reduce(function (r, a) {\r\n          r[a.date] = r[a.date] || [];\r\n          r[a.date].push(a);\r\n          return r;\r\n      }, Object.create(null));\r\n      console.log('TEST!')\r\n      console.log(result);\r\n      var bills = []\r\n      for(var day in result)\r\n      {\r\n          var billsOnDay = []\r\n          console.log(result[day])\r\n          for(var element in result[day]) \r\n          {\r\n            element = result[day][element]\r\n            billsOnDay.push(\r\n            <div className='bill'>\r\n             <div className= 'date-row'>\r\n                          \r\n                        </div>\r\n                        <div className='first-row'>\r\n                              <a className='bill-number' href={this.getBillLink(element.bill.bill_id)} target=\"_blank\">{element.bill.number}:</a> \r\n                              {element.bill.title ? \r\n                                <p className='bill-title'> {element.bill.title}</p> :\r\n                                <p className='bill-title'> {element.description}</p>\r\n                              \r\n                            }\r\n    \r\n                        </div>\r\n                        <div className='second-row'>\r\n                            <p className='bill-rep-name'>{this.props.name} voted </p>\r\n                            <p className={this.getVoteStyle(element.position)}>{element.position} </p>\r\n                            <p className='bill-question'>{element.question}: </p>\r\n                        </div>\r\n                        <div className='third-row'>\r\n                          <p className='bill-result'>{element.result}, </p>\r\n                          <p className='bill-total'>{element.total.no}-{element.total.yes}</p>\r\n                        </div>  \r\n    \r\n                \r\n                              \r\n                        </div>)\r\n            }\r\n            \r\n          bills.push(\r\n            <div><div><p className='bill-date'>{element.date}</p></div>\r\n          <div className='bill-on-day'>\r\n            {billsOnDay}\r\n            </div></div>)\r\n      }\r\n\r\n        console.log(bills);\r\n        return <div className=\"bills\">{bills}</div>;\r\n    }\r\n    render()\r\n    {\r\n        return(<div className=\"votes\">\r\n      {this.state.votes ? this.votes() : ''}</div>)\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}